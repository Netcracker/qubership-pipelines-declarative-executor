kind: AtlasPipeline
apiVersion: v2

pipeline:
  id: child-pipeline
  name: Child Pipeline
  vars:
    STAGE_TYPE_PY: PYTHON_MODULE

  stages:
    - name: Parallel Block
      parallel:
      - name: Spam Cmd 1
        job: template-spam-stage

      - name: Spam Cmd 2
        job: template-spam-stage

      - name: Spam Cmd 3
        job: template-spam-stage

      - name: Spam Cmd 4
        job: template-spam-stage

    - name: Last Stage of Child Pipeline
      job: template-spam-stage
      input:
        params:
          params:
            sleep_time: 1

  jobs:
    template-spam-stage:
      type: ${STAGE_TYPE_PY}
      command: "spam"
      input:
        params:
          params:
            param_count: 3
            sleep_time: 3
            sleep_period: 0.05
            random_sleep: false
            print_all_level_logs: false
